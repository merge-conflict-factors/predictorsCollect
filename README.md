# predictorsCollect

The predictorsCollect script is part of an empirical study infrastructure that aims to analyze merge conflict predictors.

More information here: https://merge-conflict-factors.github.io/merge-conflict-factors/

predictorsCollect is a Ruby script that collects, for each merge scenario, metrics about the factors concerning modularity, size, and timing of contributions. It gets as input the output result of <a href="https://github.com/merge-conflict-factors/miningGit" title="">miningGit</a> and <a href="https://github.com/merge-conflict-factors/slicesCollect" title="">slicesCollect</a> scripts. To run this script, you need to follow the instructions: 

*******Install all dependencies
1) To install the bundler to manage all dependencies, open a terminal window and run this command: gem install bundler.
2) To install all dependencies specified on the Gemfile: bundle install.

*******Configure projectsList file

The projectsList  file contains all projects used to compose the study sample. So, each line of this file should specify a project repository used and should be set as follows:

For instance, for a project  repository located in https://github.com/loginUser1/repoName1, the corresponding line should be set as "loginUser1/projectName1". That is, 
 - The owner of the project, in this example, loginUser1, and 
 - The name of the project repository, repoName1
 - Each project name needs to start and finish with ".
 
*******Copy the output results of mining and slice collect scripts execution
1) Copy all  xx_MergeScenarioList.csv  files (xx means the project (s) name (s) used to compose the sample), generated by the <a href="https://github.com/merge-conflict-factors/miningGit" title="">miningGit</a> script, to the input folder in this project.
2) Copy the file xx.csv located in the rubyData folder (generated by the <a href="https://github.com/merge-conflict-factors/slicesCollect" title="">slicesCollect</a> script), into the input folder in this project.
3) After that, the input folder should contain two files per project sample: xx_MergeScenarioList.csv and xx.csv.

*******Run this script

Run the main script: ruby MainAnalysisProjects.rb 

As a result, this script will generate into the output folder, the aggregated sample file named allProjects_AllVariables.csv. This file contains the factors and metrics evaluated in this study, collected for all merge scenarios. Thus, the metrics presented in the paper corresponding to the following columns in the file allProjects_AllVariables.csv:

- mergeCommitID: merge commit hash

- isConflicting (Merge conflict occurrence metric): Dichotomous variable, with 1 indicating that there was at least one merge conflict when merging the associated contributions. Otherwise, the variable is set to 0.

- existsCommonSlice (Changes to a common slice metric): Dichotomous variable, with 1 indicating that each contribution changed at least one file belonging to a common slice. Otherwise, the variable is set to 0.

- conflictingFilesNumber (Number of files with merge conflicts metric): Number of files with at least one merge conflict.

- conflictsNumber (Number of merge conflicts metric): Number of conflict markers reported by the git line-based merge tool when merging the associated contributions.

- numberOfCommitsGeoAverage (Number of commits metric): The geometric mean of the number of commits in each contribution.

- numberOfAuthorsGeoAverage (Number of developers metric): The geometric mean of the number of commit authors in each contribution. We choose commit author over committer because the first refers to the person who originally wrote the contribution, whereas the second refers to who last applied the
contribution.

- minimumLifeTimeGeoAverage (Duration metric): The geometric mean of the number of days between the common ancestor and the last commit in each contribution.

- numberOfChangedFilesGeoAverage (Number of changed files metric): The geometric mean of the number of changed files in each contribution. A change applied to a file in a commit and later reverted is considered to change the file according to this metric.

- numberOfChangedLinesGeoAverage (Number of changed lines metric): The geometric mean of the number of added and removed lines in each contribution. Modified lines are counted as first removed and then added [**]). Adding a line to a file in a commit and later deleting it in the same contribution leads to two changed lines according to this metric.

- contributionConclusionDelay (Conclusion delay metric): The difference, in days, between the dates of the last commit of each contribution.



Obs1: The allProjects_AllVariables.csv file also contains other metrics we collect for extra observations that are not discussed in this paper. So, we highlight above only the ones presented in the paper and that you should consider for this study. Besides, other files are generated as a result, but only for temporary or intermediary purposes to generate the allProjects_AllVariables.csv file, that corresponds to file used as input for <a href="https://github.com/merge-conflict-factors/rAnalisys" title="">statistical analysis</a> in this study.


Obs2: This script also collects the metrics for each project that composes the aggregated sample. So, you can evaluate the results per project. Thus, for each project, a file named xx_AllVariables.csv (xx means the project (s) name (s) used to compose the sample) is generated, following the same format and columns used in the allProjects_AllVariables.csv file.

[**] Y. Zhao, A. Serebrenik, Y. Zhou, V. Filkov, and B. Vasilescu, “The impact of continuous integration on other software development
practices: A large-scale empirical study,” in 2017 32nd IEEE/ACM International Conference on Automated Software Engineering (ASE).
IEEE Press, 2017, pp. 60–71.

